## 第102回Asakusa.rb(2011-04-19)

## Apr 18, 2011 From: shintaro.kakutani@g...

明日の夜は別件があるので、早々に抜けてしまうのですが、最初のほうは居ます。

100回を越えてなお、具体的にRubyを良くすることに貢献する何かを思いついてないんですけど、  
参加することにも意義はあるのだ。

## Apr 18, 2011 From: qtamaki@g...

ﾉｼ

参加します。玉置

2011年4月18日16:42 Kakutani Shintaro \<shintaro.kakutani@g...\>:

> 明日の夜は別件があるので、早々に抜けてしまうのですが、最初のほうは居ます。
> 
> 100回を越えてなお、具体的にRubyを良くすることに貢献する何かを思いついてないんですけど、 参加することにも意義はあるのだ。
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
* * *

[http://twitter.com/qtamaki](http://twitter.com/qtamaki)

## Apr 18, 2011 From: gunjisatoshi@r...

郡司です。

参加の予定です。  
大江戸Ruby会議01のレポートを何とかしに行きます。

## Apr 18, 2011 From: soares.argo@g...

初参加させていただきたいと思います。

2011/4/18 玉置 龍範 \<qtamaki@g...\>

> ノシ
> 
> 参加します。玉置
> 
> 2011年4月18日16:42 Kakutani Shintaro \<shintaro.kakutani@g...\>:
> 
> > 明日の夜は別件があるので、早々に抜けてしまうのですが、最初のほうは居ます。
> > 
> > 100回を越えてなお、具体的にRubyを良くすることに貢献する何かを思いついてないんですけど、 参加することにも意義はあるのだ。
> > 
> > - -
> > 
> > archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
> - -
> 
> [http://twitter.com/qtamaki](http://twitter.com/qtamaki)
## Apr 18, 2011 From: shintaro.kakutani@g...

初参加のかたは、meetup 会場までの行きかたはわかりますか?

こちらに案内を書いてますが、わかんなかったら聞いてくださいね。  
[http://qwik.jp/asakusarb/esm\_ueno.html](http://qwik.jp/asakusarb/esm_ueno.html)

2011/4/18 Francisco Dalla Rosa soares \<soares@a...\>:

> 初参加させていただきたいと思います。
> 
> 2011/4/18 玉置 龍範 \<qtamaki@g...\>
> 
> > ノシ
> > 
> > 参加します。玉置
* * *

Kakutani Shintaro

## Apr 18, 2011 From: hokkai7go@g...

hokkai7go です。

第102回 meetup 参加します！  
大江戸レポートが僕のところで止まっている気がするので、  
なんとか内部のリリースまでこぎつけたいと思っています。

2011年4月18日18:11 Kakutani Shintaro \<shintaro.kakutani@g...\>:

> 初参加のかたは、meetup 会場までの行きかたはわかりますか?
> 
> こちらに案内を書いてますが、わかんなかったら聞いてくださいね。[http://qwik.jp/asakusarb/esm\_ueno.html](http://qwik.jp/asakusarb/esm_ueno.html)
> 
> 2011/4/18 Francisco Dalla Rosa soares \<soares@a...\>:
> 
> > 初参加させていただきたいと思います。
> > 
> > 2011/4/18 玉置 龍範 \<qtamaki@g...\>
> > 
> > > ノシ
> > > 
> > > 参加します。玉置
> - -
> 
> Kakutani Shintaro
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
* * *

菅井祐太朗  
\<hokkai7go@g...\>

## Apr 18, 2011 From: masaki@h...

参加します  
ノートを忘れないようにしないと・・・

2011年4月18日18:31 Sugai Yutaro \<hokkai7go@g...\>:

> hokkai7go です。
> 
> 第102回 meetup 参加します！ 大江戸レポートが僕のところで止まっている気がするので、 なんとか内部のリリースまでこぎつけたいと思っています。
> 
> 2011年4月18日18:11 Kakutani Shintaro \<shintaro.kakutani@g...\>:
> 
> > 初参加のかたは、meetup 会場までの行きかたはわかりますか?
> > 
> > こちらに案内を書いてますが、わかんなかったら聞いてくださいね。[http://qwik.jp/asakusarb/esm\_ueno.html](http://qwik.jp/asakusarb/esm_ueno.html)
> > 
> > 2011/4/18 Francisco Dalla Rosa soares \<soares@a...\>:
> > 
> > > 初参加させていただきたいと思います。
> > > 
> > > 2011/4/18 玉置 龍範 \<qtamaki@g...\>
> > > 
> > > > ノシ
> > > > 
> > > > 参加します。玉置
> > - -
> > 
> > Kakutani Shintaro
> > 
> > - -
> > 
> > archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
> - -
> 
> 菅井祐太朗 \<hokkai7go@g...\>
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
## Apr 18, 2011 From: soares.argo@g...

一応 Google Maps等で行き方を調べましたが、もし迷ってしまったら、ホームページに書かれている連絡先にご連絡させていただきます。  
よろしくおねがいします。

ソアレス  
2011年4月18日18:11 Kakutani Shintaro \<shintaro.kakutani@g...\>:

> 初参加のかたは、meetup 会場までの行きかたはわかりますか?
> 
> こちらに案内を書いてますが、わかんなかったら聞いてくださいね。[http://qwik.jp/asakusarb/esm\_ueno.html](http://qwik.jp/asakusarb/esm_ueno.html)
> 
> 2011/4/18 Francisco Dalla Rosa soares \<soares@a...\>:
> 
> > 初参加させていただきたいと思います。
> > 
> > 2011/4/18 玉置 龍範 \<qtamaki@g...\>
> > 
> > > ノシ
> > > 
> > > 参加します。玉置
> - -
> 
> Kakutani Shintaro
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
## Apr 18, 2011 From: nakahiro@g...

明日も所用により行けません。残念。盛況をお祈りしております。

そういや先週、Asakusa.rbプロダクトの話は何か出ました？

## Apr 18, 2011 From: azuraubade.nyx21@g...

初参加させていただきます。会社が近いので自転車にて...

橋本拓也 / @T\_Hash

## Apr 19, 2011 From: celluloid.key@g...

hibariyaです。参加します。  
大江戸Ruby会議のレポートの続きをやる予定です。  
洗濯物が溜まっているので途中まで。

## Apr 19, 2011 From: irohiroki@g...

参加するつもりだったんですが、家族が体調を崩しているのでやめときます。  
次の機会によろしくお願いします！

@irohiroki

## Apr 19, 2011 From: shintaro.kakutani@g...

2011/4/18 Hiroshi Nakamura \<nakahiro@g...\>:

> 明日も所用により行けません。残念。盛況をお祈りしております。
> 
> そういや先週、Asakusa.rbプロダクトの話は何か出ました？

prefetch-rspec を、ko1さんからも提案された fork でやれるかなあ、というのを  
moroが作業してました。  
[https://github.com/asakusarb/prefetch-rspec/commits/dogfood](https://github.com/asakusarb/prefetch-rspec/commits/dogfood)

* * *

Kakutani Shintaro

## Apr 19, 2011 From: ronnie@d...

参加します。

いいかげんKaminariをバージョンアップしたいです。  
あと、誰かFiberうまい人がいらっしゃったら、Rails 3.1のこのへんのコミットを  
レビューしていただけたらおもしろそう。  
[https://github.com/rails/rails/commit/fad214b9e1c0a66f8fecde48fbd8d122e5c51e33](https://github.com/rails/rails/commit/fad214b9e1c0a66f8fecde48fbd8d122e5c51e33)  
[https://github.com/rails/rails/commit/e30ca001efa861cc13259ca8287837174b24e679](https://github.com/rails/rails/commit/e30ca001efa861cc13259ca8287837174b24e679)

* * *

Akira Matsuda\<ronnie@d...\>

## Apr 19, 2011 From: yuki.0w0@g...

赤松です。

勤務地が近所になったので参加します。  
Fiberをよく知らないのでその辺り調べたり、  
Rails3.1まわりについて調べたりします。

赤松 祐希  
[http://ukstudio.jp](http://ukstudio.jp)

2011年4月19日11:09 Akira Matsuda \<ronnie@d...\>:

> 参加します。
> 
> いいかげんKaminariをバージョンアップしたいです。 あと、誰かFiberうまい人がいらっしゃったら、Rails 3.1のこのへんのコミットを レビューしていただけたらおもしろそう。[https://github.com/rails/rails/commit/fad214b9e1c0a66f8fecde48fbd8d122e5c51e33](https://github.com/rails/rails/commit/fad214b9e1c0a66f8fecde48fbd8d122e5c51e33)[https://github.com/rails/rails/commit/e30ca001efa861cc13259ca8287837174b24e679](https://github.com/rails/rails/commit/e30ca001efa861cc13259ca8287837174b24e679)
> 
> - -
> 
> Akira Matsuda\<ronnie@d...\>
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
## Apr 19, 2011 From: nakahiro@g...
> あと、誰かFiberうまい人がいらっしゃったら、Rails 3.1のこのへんのコミットを レビューしていただけたらおもしろそう。[https://github.com/rails/rails/commit/fad214b9e1c0a66f8fecde48fbd8d122e5c51e33](https://github.com/rails/rails/commit/fad214b9e1c0a66f8fecde48fbd8d122e5c51e33)[https://github.com/rails/rails/commit/e30ca001efa861cc13259ca8287837174b24e679](https://github.com/rails/rails/commit/e30ca001efa861cc13259ca8287837174b24e679)

[https://github.com/rails/rails/compare/c63075...2bf0d9](https://github.com/rails/rails/compare/c63075...2bf0d9)  
こうかな。面白いですね。"Yo dawg"の具体的なひと（ユーザ）は誰だろう。

でかいhunkのstreamingにはよさそう。細切れだと性能落ちそう。わかってる人しか使わないだろうけどw

## Apr 19, 2011 From: ronnie@d...

2011/4/19 Hiroshi Nakamura \<nahi@r...\>:

> [https://github.com/rails/rails/compare/c63075...2bf0d9](https://github.com/rails/rails/compare/c63075...2bf0d9)こうかな。面白いですね。"Yo dawg"の具体的なひと（ユーザ）は誰だろう。

あー、そんな感じですね。

> でかいhunkのstreamingにはよさそう。細切れだと性能落ちそう。わかってる人しか使わないだろうけどw

ですね。  
想定される用途としては、サーバー側で多少時間を食うようなサイドバー的なコンテンツとかを  
layoutに追い出してFiberで処理させて、先に具のほうだけをブラウザに投げちゃう、みたいな、  
今ならAjaxでやるしか的なところで使うようなイメージかと思います。

ちなみに、もともとの構想についてはこちらで書かれてます。  
構想から実装まで半年以上かかってるんだなー。  
[http://yehudakatz.com/2010/09/07/automatic-flushing-the-rails-3-1-plan/](http://yehudakatz.com/2010/09/07/automatic-flushing-the-rails-3-1-plan/)

* * *

Akira Matsuda\<ronnie@d...\>

## Apr 19, 2011 From: irohiroki@g...

2011/4/19 Akira Matsuda \<ronnie@d...\>:

> 想定される用途としては、サーバー側で多少時間を食うようなサイドバー的なコンテンツとかを layoutに追い出してFiberで処理させて、先に具のほうだけをブラウザに投げちゃう、みたいな、 今ならAjaxでやるしか的なところで使うようなイメージかと思います。
> 
> ちなみに、もともとの構想についてはこちらで書かれてます。 構想から実装まで半年以上かかってるんだなー。[http://yehudakatz.com/2010/09/07/automatic-flushing-the-rails-3-1-plan/](http://yehudakatz.com/2010/09/07/automatic-flushing-the-rails-3-1-plan/)

蛇足ですが↓にも解説があります。

[http://weblog.rubyonrails.org/2011/4/18/why-http-streaming](http://weblog.rubyonrails.org/2011/4/18/why-http-streaming)

irohiroki

## Apr 19, 2011 From: hotchpotch@g...

おー面白そうですね。

ちなみに今 Rack でストリーミングを細切れでもちゃんと送れるサーバってご存じですか？  
passenger だとある程度決めうちで String のバッファとってた(もしくは一括送信でストリーム対応してないかも)気がします。

2011年4月19日11:59 Hiroki Yoshioka \<irohiroki@g...\>:

> 2011/4/19 Akira Matsuda \<ronnie@d...\>:
> 
> > 想定される用途としては、サーバー側で多少時間を食うようなサイドバー的なコンテンツとかを layoutに追い出してFiberで処理させて、先に具のほうだけをブラウザに投げちゃう、みたいな、 今ならAjaxでやるしか的なところで使うようなイメージかと思います。
> > 
> > ちなみに、もともとの構想についてはこちらで書かれてます。 構想から実装まで半年以上かかってるんだなー。[http://yehudakatz.com/2010/09/07/automatic-flushing-the-rails-3-1-plan/](http://yehudakatz.com/2010/09/07/automatic-flushing-the-rails-3-1-plan/)
> 
> 蛇足ですが↓にも解説があります。
> 
> [http://weblog.rubyonrails.org/2011/4/18/why-http-streaming](http://weblog.rubyonrails.org/2011/4/18/why-http-streaming)
> 
> irohiroki
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
## Apr 19, 2011 From: takahashimm@g...

高橋征義です。

本日参加します。よろしくお願いします。

2011年4月19日12:05 secondlife \<hotchpotch@g...\>:

> ちなみに今 Rack でストリーミングを細切れでもちゃんと送れるサーバってご存じですか？ passenger だとある程度決めうちで String のバッファとってた(もしくは一括送信でストリーム対応してないかも)気がします。

RackってAPI的に対応してなくて、それぞれ独自のやり方をしている  
みたいな話があったような気がしますが、あんまり詳しくないです…。

* * *

高橋征義 (takahashimm@g...)

## Apr 19, 2011 From: shimura-hir@o...

参加します、宜しくお願いします。

    志村 弘之

In message "[asakusarb:2083] 第102回Asakusa.rb(2011-04-19)", \<BANLkTi=8J=SE-Q6  
=OudqyE66JcO4=sTSHg@m...\>,

    >参加することにも意義はあるのだ。

    - ------------------------------------+---------+---------+以上 2011/4/19

志村弘之 mailto: shimura-hir@o...

## Apr 19, 2011 From: shintaro.kakutani@g...

かくたにです。ちょっとタイミング的にいけなくなりそうです……すんません。

## Apr 19, 2011 From: irohiroki@g...

2011/4/19 secondlife \<hotchpotch@g...\>:

> ちなみに今 Rack でストリーミングを細切れでもちゃんと送れるサーバってご存じですか？ passenger だとある程度決めうちで String のバッファとってた(もしくは一括送信でストリーム対応してないかも)気がします。

edge railsでやってみました。  
やり方は、ActionView::StreamingTemplateRendererのdocに書いてあるサンプルの  
\<%= provide :footer, "6" %\>  
の上に  
\<% sleep 10 -%\>を入れます。  
もっと上にある  
\<%= provide :footer, "1" %\>  
は先にブラウザに表示されるはずです。

unicornだと下の画のように5秒で一度flushしました。  
[http://imgur.com/U0wlB](http://imgur.com/U0wlB)

しかし5秒も待ってますから、これはunicornが気を利かせてflushしたのであって  
railsの方からflushのシグナルが伝わっているのではないでしょう。

webrickではhtmlが全部転送されてからcssとjsでした。

なお、このサンプルのテンプレートをstreamingするには  
render :stream =\> true  
とする必要があります。

irohiroki

## Apr 19, 2011 From: takkanm@g...

気づいたら参加してました

2011年4月19日18:14 Hiroki Yoshioka \<irohiroki@g...\>:

> 2011/4/19 secondlife \<hotchpotch@g...\>:
> 
> > ちなみに今 Rack でストリーミングを細切れでもちゃんと送れるサーバってご存じですか？ passenger だとある程度決めうちで String のバッファとってた(もしくは一括送信でストリーム対応してないかも)気がします。
> 
> edge railsでやってみました。 やり方は、ActionView::StreamingTemplateRendererのdocに書いてあるサンプルの \<%= provide :footer, "6" %\> の上に \<% sleep 10 -%\>を入れます。 もっと上にある \<%= provide :footer, "1" %\> は先にブラウザに表示されるはずです。
> 
> unicornだと下の画のように5秒で一度flushしました。[http://imgur.com/U0wlB](http://imgur.com/U0wlB)
> 
> しかし5秒も待ってますから、これはunicornが気を利かせてflushしたのであって railsの方からflushのシグナルが伝わっているのではないでしょう。
> 
> webrickではhtmlが全部転送されてからcssとjsでした。
> 
> なお、このサンプルのテンプレートをstreamingするには render :stream =\> true とする必要があります。
> 
> irohiroki
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
## Apr 19, 2011 From: ogijun@g...

また9時間際に行きますーー。

2011/4/19 \<takkanm@g...\>:

> 気づいたら参加してました
> 
> 2011年4月19日18:14 Hiroki Yoshioka \<irohiroki@g...\>:
> 
> > 2011/4/19 secondlife \<hotchpotch@g...\>:
> > 
> > > ちなみに今 Rack でストリーミングを細切れでもちゃんと送れるサーバってご存じですか？ passenger だとある程度決めうちで String のバッファとってた(もしくは一括送信でストリーム対応してないかも)気がします。
> > 
> > edge railsでやってみました。 やり方は、ActionView::StreamingTemplateRendererのdocに書いてあるサンプルの \<%= provide :footer, "6" %\> の上に \<% sleep 10 -%\>を入れます。 もっと上にある \<%= provide :footer, "1" %\> は先にブラウザに表示されるはずです。
> > 
> > unicornだと下の画のように5秒で一度flushしました。[http://imgur.com/U0wlB](http://imgur.com/U0wlB)
> > 
> > しかし5秒も待ってますから、これはunicornが気を利かせてflushしたのであって railsの方からflushのシグナルが伝わっているのではないでしょう。
> > 
> > webrickではhtmlが全部転送されてからcssとjsでした。
> > 
> > なお、このサンプルのテンプレートをstreamingするには render :stream =\> true とする必要があります。
> > 
> > irohiroki
> > 
> > - -
> > 
> > archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
* * *

ogijun

## Apr 19, 2011 From: masaki@h...

仕事終わらないので行けそうだったら行きますー

2011年4月19日20:13 Junya Ogino \<ogijun@g...\>:

> また9時間際に行きますーー。
> 
> 2011/4/19 \<takkanm@g...\>:
> 
> > 気づいたら参加してました
> > 
> > 2011年4月19日18:14 Hiroki Yoshioka \<irohiroki@g...\>:
> > 
> > > 2011/4/19 secondlife \<hotchpotch@g...\>:
> > > 
> > > > ちなみに今 Rack でストリーミングを細切れでもちゃんと送れるサーバってご存じですか？ passenger だとある程度決めうちで String のバッファとってた(もしくは一括送信でストリーム対応してないかも)気がします。
> > > 
> > > edge railsでやってみました。 やり方は、ActionView::StreamingTemplateRendererのdocに書いてあるサンプルの \<%= provide :footer, "6" %\> の上に \<% sleep 10 -%\>を入れます。 もっと上にある \<%= provide :footer, "1" %\> は先にブラウザに表示されるはずです。
> > > 
> > > unicornだと下の画のように5秒で一度flushしました。[http://imgur.com/U0wlB](http://imgur.com/U0wlB)
> > > 
> > > しかし5秒も待ってますから、これはunicornが気を利かせてflushしたのであって railsの方からflushのシグナルが伝わっているのではないでしょう。
> > > 
> > > webrickではhtmlが全部転送されてからcssとjsでした。
> > > 
> > > なお、このサンプルのテンプレートをstreamingするには render :stream =\> true とする必要があります。
> > > 
> > > irohiroki
> > > 
> > > - -
> > > 
> > > archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
> > - -
> > 
> > archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
> - -
> 
> ogijun
> 
> - -
> 
> archive-\> [http://qwik.jp/asakusarb/hack102.html](http://qwik.jp/asakusarb/hack102.html)ML-\> asakusarb@q...
